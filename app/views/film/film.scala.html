@import com.wizardsofsmart.cineaste.domain.film.{Film, FilmCast, FilmSeries, FilmStaff, FilmStudio}
@(film: Film, staff: Seq[FilmStaff], cast: Seq[FilmCast], studios: Seq[FilmStudio], series: Option[FilmSeries], synopsis: String)
<!DOCTYPE html>
<html>
    <head>
        <title>@film.title - Godzilla Cineaste</title>
    </head>
    <body>
        @views.html.partials.navbar()
        <h1>@film.title</h1>
        <p>This is the individual film page</p>
            <!-- Japanese Title -->
        @if(film.japaneseTitleUnicode.isDefined && film.japaneseTitleTransliteration.isDefined && film.japaneseTitleTranslation.isDefined) {
            <p>Original title: <i>@Html(film.japaneseTitleUnicode.get)</i></p>
            <p>(<i>@film.japaneseTitleTransliteration.get</i> / <i>@film.japaneseTitleTranslation.get</i>)</p>
        }
            <!-- Aliases -->
        @if(film.aliases.isDefined) {
            <p>Also known as @film.aliases.get.mkString(", ")</p>
        }
            <!-- Release Date -->
        <p>Released @film.displayReleaseDate</p>
            <!-- Studio -->
        @defining(for(studio <- studios) yield studio.name) { studioNames =>
            <p>Produced by @studioNames.mkString(", ")</p>
        }
            <!-- Duration -->
        <p>Duration: @film.duration minutes</p>

            <!-- Series -->
        @if(series.isDefined) {
            @if(series.get.precedent.isDefined) {
                <p>Preceded by @series.get.precedent.get.title</p>
            }
            @if(series.get.antecedent.isDefined) {
                <p>Followed by @series.get.antecedent.get.title</p>
            }
        }

        <hr/>

            <!-- Staff -->
        <table>
            <thead>Staff</thead>
            @for(role <- staff) {
                <tr>
                    <td style="vertical-align : top">@role.role</td>
                    <td>
                    @for(person <- role.people) {
                        @person.displayName <br/>
                    }
                    </td>
                </tr>
            }
        </table>
        <hr/>

            <!-- Top Billed Cast -->
        <table>
            <thead>Cast</thead>
            @defining(cast.filter(_.orders.head < 99)) { billedCast =>
                @for(member <- billedCast) {
                    <tr>
                        <td style="vertical-align : top">@member.people.displayName</td>
                        <td>
                        @for(character <- member.characters) {
                            @character <br/>
                        }
                        </td>
                    </tr>
                }
            }
        </table>

            <!-- Uncredited Cast -->
        @defining(cast.filter(_.orders.head == 99)) { uncreditedCast =>
            @if(uncreditedCast.nonEmpty) {
                <table>

                    <thead>Uncredited Cast</thead>
                    @for(member <- uncreditedCast) {
                        <tr>
                            <td style="vertical-align : top">@member.people.displayName</td>
                            <td>
                            @for(character <- member.characters) {
                                @character <br/>
                            }
                            </td>
                        </tr>
                    }
                </table>
            }
        }
        <hr/>
        @Html(synopsis)
    </body>
</html>